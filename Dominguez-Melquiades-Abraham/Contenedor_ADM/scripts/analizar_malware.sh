#!/bin/bash

# Verificar si se proporciona el archivo como argumento
if [ -z "$1" ]; then
  echo "Uso: $0 archivo_para_analizar"
  exit 1
fi

archivo="$1"

# Verificar si el archivo existe
if [ ! -f "$archivo" ]; then
  echo "El archivo '$archivo' no existe."
  exit 1
fi

# Crear carpeta para los resultados
output_folder="analisis_$(basename "$archivo" .${archivo##*.})"
mkdir -p "$output_folder"

echo "Analizando el archivo: $archivo"

# Ejecutar binwalk
echo "Ejecutando binwalk..."
binwalk "$archivo" > "$output_folder/binwalk_output.txt"

# Ejecutar exiftool
echo "Ejecutando exiftool..."
exiftool "$archivo" > "$output_folder/exiftool_output.txt"

# Ejecutar file
echo "Ejecutando file..."
file "$archivo" > "$output_folder/file_output.txt"

# Ejecutar strings
echo "Ejecutando strings..."
strings "$archivo" > "$output_folder/strings_output.txt"

echo "Análisis completado. Los resultados están en la carpeta '$output_folder'"
